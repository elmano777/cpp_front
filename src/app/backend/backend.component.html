<div class="flex flex-col space-y-5 bg-gray-200 px-2 h-screen">
  <div class="flex flex-row w-full h-auto bg-gray-200 justify-between font-black text-xl">
    <p>{{ userName }}</p>
    <button (click)="logOut()" class="hover:cursor-pointer">Log out</button>
  </div>

  <div class="flex flex-row w-full h-auto bg-gray-200 space-x-2">
    <button
      (click)="toFront()"
      class="hover:cursor-pointer bg-blue-500 border-0 rounded-xl px-2 py-1 text-white"
    >
      FrontEnd
    </button>
    <button
      (click)="toBack()"
      class="hover:cursor-pointer bg-blue-500 border-0 rounded-xl px-2 py-1 text-white"
    >
      BackEnd
    </button>
  </div>

  <div class="flex flex-col bg-gray-100 p-4 rounded-lg">
    <div class="flex justify-between items-center mb-4">
      <strong class="text-2xl">Estructura del Treap:</strong>
      <button
        (click)="loadTreeStructure()"
        class="bg-purple-500 text-white px-4 py-2 rounded-xl hover:bg-purple-600"
      >
        Actualizar Árbol
      </button>
    </div>

    <div class="w-full h-96 bg-white rounded-lg border-2 border-gray-300 overflow-auto" *ngIf="treeStructure">
      <svg [attr.width]="svgWidth" [attr.height]="svgHeight" class="min-w-full min-h-full">
        <g *ngFor="let line of lines">
          <line
            [attr.x1]="line.x1"
            [attr.y1]="line.y1"
            [attr.x2]="line.x2"
            [attr.y2]="line.y2"
            stroke="#666"
            stroke-width="2"
          />
        </g>

        <g *ngFor="let pos of nodePositions">
          <circle
            [attr.cx]="pos.x"
            [attr.cy]="pos.y"
            r="30"
            fill="#4F46E5"
            stroke="#312E81"
            stroke-width="2"
          />

          <text
            [attr.x]="pos.x"
            [attr.y]="pos.y - 5"
            text-anchor="middle"
            fill="white"
            font-size="10"
            font-weight="bold"
          >
            {{getShortKey(pos.node.key)}}
          </text>

          <text
            [attr.x]="pos.x"
            [attr.y]="pos.y + 8"
            text-anchor="middle"
            fill="white"
            font-size="8"
          >
            P:{{pos.node.priority}}
          </text>
        </g>
      </svg>
    </div>

    <div *ngIf="!treeStructure" class="text-center text-gray-500 p-8">
      No hay datos del árbol para mostrar
    </div>
  </div>
</div>
